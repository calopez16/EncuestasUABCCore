@using EncuestasUABC.ViewModels;
@using EncuestasUABC.Enumerador;
@using EncuestasUABC.Utilidades;
@using EncuestasUABC.Extensions;

@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{UsuarioInfoViewModel usuarioInfo = HttpContextAccessor.HttpContext.GetUsuarioInfoViewModel(); }


<!DOCTYPE html>
<html lang="es-mx">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - EncuestasUABC</title>
    <link rel="stylesheet" type="text/css" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="~/lib/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="~/lib/daterangepicker/daterangepicker.min.css" />
    <link rel="stylesheet" type="text/css" href="~/lib/selec2/css/select2.min.css" />
    <link rel="stylesheet" type="text/css" href="~/lib/jquery-ui/jquery-ui.css" />

    <!-- PLUGINS STYLES-->
    @*<link href="./assets/vendors/jvectormap/jquery-jvectormap-2.0.3.css" rel="stylesheet" />*@
    <!-- THEME STYLES-->
    <link rel="stylesheet" type="text/css" href="~/css/main.min.css" />
    <link rel="stylesheet" type="text/css" href="~/css/animate.css" />
    <link rel="stylesheet" type="text/css" href="~/css/site.css" />

    <script type="text/javascript" src="~/lib/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
</head>
<body class="fixed-navbar">

    <div class="page-wrapper">
        <!-- START HEADER-->
        <header class="header bg-green">
            <div class="page-brand bg-green">
                <a class="link" href="@Url.Action("Index","Home")">
                    <span class="brand text-center">
                        <img src="~/img/EncuestaUABC_Logo.png" alt="" style="width:80%" />
                    </span>
                    <span class="brand-mini"><img src="~/img/EncuestaUABC_LogoIcon.png" alt="" style="width:100%"></span>
                </a>
            </div>
            <div class="flexbox flex-1 bg-green">
                <!-- START TOP-LEFT TOOLBAR-->
                <ul class="nav navbar-toolbar">
                    <li>
                        <a class="nav-link sidebar-toggler js-sidebar-toggler"><i class="fa fa-bars"></i></a>
                    </li>
                    <li>
                        @*<h4 class="text-light mt-1">@ViewData["Title"]</h4>*@
                    </li>
                </ul>
                <!-- END TOP-LEFT TOOLBAR-->
                <!-- START TOP-RIGHT TOOLBAR-->
                <ul class="nav navbar-toolbar">
                    @*<li>
                            <div class="form-group d-none d-md-block">
                                <div class="input-group-icon">
                                    <div class="input-icon"><i class="fa fa-search"></i></div>
                                    <input class="form-control" type="text" placeholder="Búsqueda en la página" style="width:500px">
                                </div>
                            </div>
                        </li>*@
                    <li class="dropdown dropdown-user">
                        <a class="nav-link dropdown-toggle link" data-toggle="dropdown">
                            <img src="~/img/admin-avatar.png" />
                            <span class="d-none d-md-block">@usuarioInfo.NombreCompleto</span> <i class="fa fa-angle-down m-l-5"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" asp-action="Perfil" asp-controller="Usuarios"><i class="fa fa-user"></i>Perfil</a>
                            <a class="dropdown-item" asp-action="Ayuda" asp-controller="Home"><i class="fa fa-support"></i>Ayuda</a>
                            <li class="dropdown-divider"></li>
                            <a class="dropdown-item" href="##" onclick="$('#form_Logout').submit()"><i class="fa fa-power-off"></i>Cerrar Sesión</a>
                        </ul>
                    </li>
                </ul>
                <!-- END TOP-RIGHT TOOLBAR-->
            </div>
            <form asp-action="Logout" asp-controller="Usuarios" id="form_Logout">
            </form>
        </header>
        <!-- END HEADER-->
        <!-- START SIDEBAR-->
        <nav class="page-sidebar" id="sidebar">
            <div id="sidebar-collapse">
                <div class="admin-block d-flex">
                    <img src="~/img/UABC_Escudo.png" alt="" width="300">
                </div>
                <div class="admin-block d-flex">
                    <div>
                        <img src="~/img/admin-avatar.png" width="45" />
                    </div>
                    <div class="admin-info">
                        <div class="font-strong">@usuarioInfo.NombreCompleto</div><small>@usuarioInfo.Rol</small>
                    </div>
                </div>

                <ul class="side-menu metismenu">

                    @foreach (var permisoPadre in usuarioInfo.Permisos)
                    {
                        <li>
                            <a href="javascript:;">
                                <i class="sidebar-item-icon @permisoPadre.Icono"></i>
                                <span class="nav-label">@permisoPadre.Descripcion</span><i class="fa fa-angle-left arrow"></i>
                            </a>
                            <ul class="nav-2-level collapse">
                                @foreach (var permisoHijo in permisoPadre.PermisosHijos)
                                {
                                    <li>
                                        <a href="@Url.Action(permisoHijo.Action,permisoHijo.Controller)">@permisoHijo.Descripcion</a>
                                    </li>
                                }

                            </ul>
                        </li>
                    }
                    <li><hr /></li>
                    <li>
                        <a href="registro-usuarios.html">
                            <i class="sidebar-item-icon fa fa-life-ring"></i>
                            <span class="nav-label">Soporte</span>
                        </a>
                    </li>
                    <li>
                        <a href="##" onclick="$('#form_Logout').submit()">
                            <i class="sidebar-item-icon fa fa-sign-out"></i>
                            <span class="nav-label">Cerrar sesión</span>
                        </a>

                    </li>
                </ul>
            </div>
        </nav>
        <!-- END SIDEBAR-->
        <div class="content-wrapper">
            @*<div class="page-heading">
                    <h1 class="page-title">@ViewData["Title"]</h1>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="index.html"><i class="la la-home font-20"></i></a>
                        </li>
                        <li class="breadcrumb-item">Colors</li>
                        <li class="breadcrumb-item">Colors</li>

                    </ol>
                </div>*@
            <!-- START PAGE CONTENT-->
            <div class="page-content fade-in-up">
                @RenderBody()
            </div>
            <!-- END PAGE CONTENT-->
            <footer class="page-footer">
                <div class="font-13"><b>ENCUESTAS UABC</b> @DateTime.Now.Year ©  - Todos los derechos reservados.</div>
                <div class="to-top"><i class="fa fa-angle-double-up"></i></div>
            </footer>
        </div>
    </div>


    <!-- BEGIN PAGA BACKDROPS-->
    <div class="sidenav-backdrop backdrop"></div>
    <div class="preloader-backdrop">
        <div class="page-preloader">Cargando...</div>
    </div>

    <!-- CORE PLUGINS-->
    <script type="text/javascript" src="~/lib/popper.js/dist/umd/popper.min.js"></script>
    <script type="text/javascript" src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/lib/metisMenu/dist/metisMenu.min.js"></script>
    <script type="text/javascript" src="~/lib/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="~/lib/momentjs/moment.js"></script>
    <script type="text/javascript" src="~/lib/bootstrap-notify/bootstrap-notify.min.js"></script>
    <script type="text/javascript" src="~/lib/jquery-ui/jquery-ui.js"></script>

    <!-- PAGE LEVEL PLUGINS-->
    <script type="text/javascript" src="~/lib/chart.js/dist/Chart.min.js"></script>
    <script type="text/javascript" src="~/lib/jquery.inputmask/jquery.maskedinput.min.js"></script>
    <!--Select2-->
    <script type="text/javascript" src="~/lib/selec2/js/select2.min.js"></script>
    <script type="text/javascript" src="~/lib/selec2/js/i18n/es.js"></script>

    <script type="text/javascript" src="~/js/app.min.js"></script>
    <script type="text/javascript" src="~/js/site.js"></script>
    <partial name="~/Views/Shared/_Alerts.cshtml" />
    @RenderSection("Scripts", required: false)
    <script type="text/javascript">
        var enum_MessageAlertType = @(EnumHelper.EnumToString<MessageAlertType>());
    </script>
</body>
</html>
